(function(a){a.fn.twittie=function(){var e=(arguments[0] instanceof Object)?arguments[0]:{},b=(typeof arguments[0]==="function")?arguments[0]:arguments[1];var f=a.extend({username:null,list:null,hashtag:null,count:10,hideReplies:false,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php",loadingText:"Loading..."},e);if(f.list&&!f.username){a.error("If you want to fetch tweets from a list, you must define the username of the list owner.")}var d=function(i){var j=i.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/ig,'<a href="$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,'<a href="https://twitter.com/search?q=%23$1&amp;src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="https://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>');return j};var c=function(q){var p=q.split(" ");q=new Date(Date.parse(p[1]+" "+p[2]+", "+p[5]+" "+p[3]+" UTC"));var o=["January","February","March","April","May","June","July","August","September","October","November","December"];var j={"%d":q.getDate(),"%m":q.getMonth()+1,"%b":o[q.getMonth()].substr(0,3),"%B":o[q.getMonth()],"%y":String(q.getFullYear()).slice(-2),"%Y":q.getFullYear()};var k=f.dateFormat;var l=f.dateFormat.match(/%[dmbByY]/g);for(var m=0,n=l.length;m<n;m++){k=k.replace(l[m],j[l[m]])}return k};var g=function(j){var m=f.template;var n=["date","tweet","avatar","url","retweeted","screen_name","user_name","tweet_id"];for(var k=0,l=n.length;k<l;k++){m=m.replace(new RegExp("{{"+n[k]+"}}","gi"),j[n[k]])}return m};this.html("<span>"+f.loadingText+"</span>");var h=this;a.getJSON(f.apiPath,{username:f.username,list:f.list,hashtag:f.hashtag,count:f.count,exclude_replies:f.hideReplies},function(i){h.find("span").fadeOut("fast",function(){h.html('<ul class="gfort-twitter-list"></ul>');for(var j=0;j<f.count;j++){var l=false;if(i[j]){l=i[j]}else{if(i.statuses!==undefined&&i.statuses[j]){l=i.statuses[j]}else{break}}var k={user_name:l.user.name,date:c(l.created_at),tweet:(l.retweeted)?d("RT @"+l.user.screen_name+": "+l.retweeted_status.text):d(l.text),avatar:'<img src="'+l.user.profile_image_url+'" />',url:"https://twitter.com/"+l.user.screen_name+"/status/"+l.id_str,tweet_id:l.id_str,retweeted:l.retweeted,screen_name:d("@"+l.user.screen_name)};h.find("ul").append('<li class="gfort-twitter-item">'+g(k)+"</li>")}if(typeof b==="function"){b()}})})}})(jQuery);